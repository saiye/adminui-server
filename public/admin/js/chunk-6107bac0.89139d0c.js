(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6107bac0"],{"2fc7":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"商户列表",inline:!0,name:"list"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.form_list}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入商户名称"},model:{value:e.form_list.company_name,callback:function(t){e.$set(e.form_list,"company_name",t)},expression:"form_list.company_name"}})],1),a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入联系人名称"},model:{value:e.form_list.real_name,callback:function(t){e.$set(e.form_list,"real_name",t)},expression:"form_list.real_name"}})],1),a("el-form-item",[a("el-select",{attrs:{clearable:"",placeholder:"请选择国家"},model:{value:e.form_list.state_id,callback:function(t){e.$set(e.form_list,"state_id",t)},expression:"form_list.state_id"}},e._l(e.state,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-date-picker",{attrs:{type:"datetimerange",align:"right","picker-options":e.pickerOptions,"start-placeholder":"请选择起始日期","end-placeholder":"请选择结束日期","default-time":["00:00:00","23:59:59"]},model:{value:e.form_list.listDate,callback:function(t){e.$set(e.form_list,"listDate",t)},expression:"form_list.listDate"}}),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",round:""},on:{click:e.onSearchList}},[e._v("查询")])],1)],1),a("add_business",{attrs:{state:e.state},on:{success:e.loadBusinessListData}}),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.BusinessLoading,expression:"BusinessLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableBusinessData,border:"",stripe:"","highlight-current-row":"","header-cell-class-name":"table-header-class"}},[a("el-table-column",{attrs:{prop:"company_id",label:"序号"}}),a("el-table-column",{attrs:{prop:"manage.account",label:"账号"}}),a("el-table-column",{attrs:{prop:"company_name",label:"商户名称"}}),a("el-table-column",{attrs:{prop:"state.name",label:"国家"}}),a("el-table-column",{attrs:{prop:"manage.real_name",label:"联系人"}}),a("el-table-column",{attrs:{prop:"manage.phone",label:"联系电话"}}),a("el-table-column",{attrs:{prop:"created_at",label:"注册日期"}}),a("el-table-column",{attrs:{prop:"status",label:"状态"}}),a("el-table-column",{attrs:{align:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[2==t.row.status?a("el-button",{attrs:{size:"mini",type:"primary",round:""},on:{click:function(a){return e.lockCompany(1,t.row)}}},[e._v("解冻 ")]):e._e(),1==t.row.status?a("el-button",{attrs:{size:"mini",type:"danger",round:""},on:{click:function(a){return e.lockCompany(2,t.row)}}},[e._v("冻结 ")]):e._e()]}}])})],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"pagination"},[e.BusinessPaginate.total>0?a("el-pagination",{attrs:{background:"","page-sizes":e.BusinessPaginate.pageSizes,"page-size":e.BusinessPaginate.pageSize,layout:e.BusinessPaginate.layout,total:e.BusinessPaginate.total,"current-page":e.BusinessPaginate.pageIndex},on:{"current-change":e.handleBusinessChangePage,"size-change":e.handleBusinessChangeSize}}):e._e()],1)])],1)],1),a("el-tab-pane",{attrs:{label:"商户审核",name:"check"}},[a("el-dialog",{attrs:{title:"拒绝原因",visible:e.dialogRejectVisible,width:"50%","before-close":e.handleDialogRejectClose},on:{"update:visible":function(t){e.dialogRejectVisible=t}}},[a("el-form",{ref:"reject_form",attrs:{model:e.rejectMessage,rules:e.rejectRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"拒绝原因",prop:"reason"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.rejectMessage.reason,callback:function(t){e.$set(e.rejectMessage,"reason",t)},expression:"rejectMessage.reason"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogRejectVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.doRejectCheck("reject_form")}}},[e._v("确 定")])],1)],1),a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.check_list}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入商户名称"},model:{value:e.check_list.company_name,callback:function(t){e.$set(e.check_list,"company_name",t)},expression:"check_list.company_name"}})],1),a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入联系人名称"},model:{value:e.check_list.real_name,callback:function(t){e.$set(e.check_list,"real_name",t)},expression:"check_list.real_name"}})],1),a("el-form-item",[a("el-select",{attrs:{clearable:"",placeholder:"请选择国家"},model:{value:e.check_list.state_id,callback:function(t){e.$set(e.check_list,"state_id",t)},expression:"check_list.state_id"}},e._l(e.state,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-date-picker",{attrs:{type:"datetimerange",align:"right","picker-options":e.pickerOptions,"start-placeholder":"请选择起始日期","end-placeholder":"请选择结束日期","default-time":["00:00:00","23:59:59"]},model:{value:e.check_list.listDate,callback:function(t){e.$set(e.check_list,"listDate",t)},expression:"check_list.listDate"}}),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",round:""},on:{click:e.onSearchCheckList}},[e._v("查询")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.BusinessCheckLoading,expression:"BusinessCheckLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableCheckBusinessData,border:"",stripe:"","highlight-current-row":"","header-cell-class-name":"table-header-class"}},[a("el-table-column",{attrs:{prop:"company_id",label:"序号"}}),a("el-table-column",{attrs:{prop:"manage.account",label:"账号"}}),a("el-table-column",{attrs:{prop:"company_name",label:"商户名称"}}),a("el-table-column",{attrs:{prop:"state.name",label:"国家"}}),a("el-table-column",{attrs:{prop:"manage.real_name",label:"联系人"}}),a("el-table-column",{attrs:{prop:"manage.phone",label:"联系电话"}}),a("el-table-column",{attrs:{prop:"created_at",label:"注册日期"}}),a("el-table-column",{attrs:{prop:"check",label:"状态"}}),a("el-table-column",{attrs:{align:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary",round:""},on:{click:function(a){return e.handleCheckPass(t.$index,t.row)}}},[e._v("通过 ")]),a("el-button",{attrs:{size:"mini",type:"danger",round:""},on:{click:function(a){return e.handleCheckReject(t.$index,t.row)}}},[e._v("拒绝 ")])]}}])})],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"pagination"},[e.BusinessCheckPaginate.total>0?a("el-pagination",{attrs:{background:"","page-sizes":e.BusinessCheckPaginate.pageSizes,"page-size":e.BusinessCheckPaginate.pageSize,layout:e.BusinessCheckPaginate.layout,total:e.BusinessCheckPaginate.total,"current-page":e.BusinessCheckPaginate.pageIndex},on:{"current-change":e.handleCheckBusinessChangePage,"size-change":e.handleCheckBusinessChangeSize}}):e._e()],1)])],1)],1)],1)},l=[],n=(a("b0c0"),a("fcac")),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button",{staticStyle:{float:"right","margin-right":"20px","margin-bottom":"10px"},attrs:{size:"mini",round:""},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加商户")])],1)],1),a("el-dialog",{attrs:{title:"添加商户","close-on-click-modal":e.closeModal,visible:e.dialogVisible,width:"700px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"add-dialog-box"},[a("el-form",{ref:"dialog_form",attrs:{model:e.dialog_form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"商户名称",prop:"company_name"}},[a("el-input",{model:{value:e.dialog_form.company_name,callback:function(t){e.$set(e.dialog_form,"company_name",t)},expression:"dialog_form.company_name"}})],1),a("el-form-item",{attrs:{label:"所在国家",prop:"state_id"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择活动区域"},model:{value:e.dialog_form.state_id,callback:function(t){e.$set(e.dialog_form,"state_id",t)},expression:"dialog_form.state_id"}},e._l(e.state,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"营业执照"}},[a("el-upload",{attrs:{action:"https://jsonplaceholder.typicode.com/posts/","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{width:"30%",title:"营业执照-原图",visible:e.dialogImgVisible,"append-to-body":""},on:{"update:visible":function(t){e.dialogImgVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),a("el-form-item",{attrs:{label:"联系人",prop:"real_name"}},[a("el-input",{model:{value:e.dialog_form.real_name,callback:function(t){e.$set(e.dialog_form,"real_name",t)},expression:"dialog_form.real_name"}},[a("template",{slot:"append"},[a("el-radio",{attrs:{label:"1"},model:{value:e.dialog_form.sex,callback:function(t){e.$set(e.dialog_form,"sex",t)},expression:"dialog_form.sex"}},[e._v("男")]),a("el-radio",{attrs:{label:"2"},model:{value:e.dialog_form.sex,callback:function(t){e.$set(e.dialog_form,"sex",t)},expression:"dialog_form.sex"}},[e._v("女")])],1)],2)],1),a("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[a("el-input",{model:{value:e.dialog_form.phone,callback:function(t){e.$set(e.dialog_form,"phone",t)},expression:"dialog_form.phone"}},[a("template",{slot:"prepend"},[e._v("+86中国大陆")])],2)],1),a("el-form-item",{attrs:{label:"分成比例",prop:"proportion"}},[a("el-input",{model:{value:e.dialog_form.proportion,callback:function(t){e.$set(e.dialog_form,"proportion",t)},expression:"dialog_form.proportion"}})],1),a("el-form-item",{attrs:{label:"商户账号",prop:"account"}},[a("el-input",{model:{value:e.dialog_form.account,callback:function(t){e.$set(e.dialog_form,"account",t)},expression:"dialog_form.account"}})],1),a("el-form-item",{attrs:{label:"商户密码",prop:"password"}},[a("el-input",{attrs:{"show-password":""},model:{value:e.dialog_form.password,callback:function(t){e.$set(e.dialog_form,"password",t)},expression:"dialog_form.password"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.businessDialogCance}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.businessDialogConfirm("dialog_form")}}},[e._v("确 定")])],1)])],1)},o=[],r={name:"add_business",props:["state"],data:function(){var e=function(e,t,a){return isNaN(t)?a(new Error("分成比例必须是一个数字")):t>100||t<1?a(new Error("分成比例的值范围是1-100!")):void a()};return{dialogVisible:!1,closeModal:!1,dialogImageUrl:"",dialogImgVisible:!1,visibleDialog:this.visible,dialog_form:{company_name:"",state_id:"",real_name:"",phone:"",proportion:100,account:"",password:"",sex:"1"},rules:{company_name:[{required:!0,message:"请输入商户名称最长50位",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50个字符",trigger:"blur"}],state_id:[{required:!0,message:"请选择所在国家",trigger:"change"}],real_name:[{required:!0,message:"请填写联系人",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50个字符",trigger:"blur"}],phone:[{required:!0,message:"请选择填手机号码最长11位",trigger:"blur"},{min:11,max:11,message:"长度在 11个字符",trigger:"blur"}],proportion:[{validator:e,trigger:"blur"}],account:[{required:!0,message:"请输入账号1-20字符",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码1-20字符",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20个字符",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}]}}},methods:{businessDialogCance:function(){this.dialogVisible=!1},businessDialogConfirm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;Object(n["a"])(t.dialog_form).then((function(e){t.dialogVisible=!1,t.$emit("success")})).catch((function(e){console.log(e)})).then((function(){console.log("add role onSubmit")}))}))},handleRemove:function(e,t){console.log(e,t)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogImgVisible=!0}}},c=r,u=a("2877"),d=Object(u["a"])(c,s,o,!1,null,null,null),m=d.exports,p={data:function(){return{activeName:"list",formLabelWidth:"120px",tableBusinessData:[],tableCheckBusinessData:[],dialogRejectVisible:!1,rejectMessage:{check:"",company_id:"",reason:""},rejectRules:{reason:[{required:!0,message:"请输入拒绝原因最长100位",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100个字符",trigger:"blur"}]},BusinessPaginate:{total:0,pageIndex:1,pageSize:15,pageSizes:[5,10,15,20],layout:"total, sizes, prev, pager, next, jumper"},BusinessCheckPaginate:{total:0,pageIndex:1,pageSize:15,pageSizes:[5,10,15,20],layout:"total, sizes, prev, pager, next, jumper"},BusinessLoading:!1,BusinessCheckLoading:!1,CheckLoading:!1,form_list:{account:"",company_name:"",real_name:"",state_id:"",start_date:"",end_date:"",listDate:"",page:1,limit:15,check:[0,2]},check_list:{account:"",company_name:"",real_name:"",state_id:"",start_date:"",end_date:"",listDate:"",page:1,limit:15,check:[0,2]},state:null,check:[1,2],pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]}}},components:{add_business:m},mounted:function(){this.loadBusinessListData(),this.loadStateData()},methods:{handleClick:function(e,t){console.log(e.name),"list"==e.name?this.loadBusinessListData():this.loadCheckListData()},loadBusinessListData:function(){var e=this;this.form_list.check=[1],Object(n["d"])(this.form_list).then((function(t){e.tableBusinessData=t.data.data.data,e.loading=!1,e.BusinessPaginate.total=t.data.data.total})).catch((function(e){console.log(e)})).then((function(){console.log("add role onSubmit")}))},loadStateData:function(){var e=this;Object(n["e"])().then((function(t){e.state=t.data.data})).catch((function(e){console.log(e)})).then((function(){}))},loadCheckListData:function(){var e=this;this.check_list.check=[0,2],this.check_list.limit=this.BusinessPaginate.pageSize,this.check_list.page=this.BusinessPaginate.pageIndex,Object(n["d"])(this.check_list).then((function(t){e.tableCheckBusinessData=t.data.data.data,e.loading=!1,e.BusinessCheckPaginate.total=t.data.data.total})).catch((function(e){console.log(e)})).then((function(){console.log("add role onSubmit")}))},handleBusinessChangePage:function(e){this.form_list.page=e,console.log("page:"+e),this.loadBusinessListData()},handleBusinessChangeSize:function(e){console.log("pageSize:"+e),this.form_list.limit=e,this.BusinessPaginate.pageSize=e,this.loadBusinessListData()},handleCheckBusinessChangePage:function(e){this.check_list.page=e,console.log("page:"+e),this.loadBusinessListData()},handleCheckBusinessChangeSize:function(e){console.log("pageSize:"+e),this.BusinessCheckPaginate.pageSize=e,this.check_list.limit=e,this.loadBusinessListData()},onSearchList:function(){this.loadBusinessListData()},onSearchCheckList:function(){this.loadCheckListData()},onSubmit:function(){console.log("submit!")},handleCheckPass:function(e,t){var a=this;this.rejectMessage.check=1,this.rejectMessage.company_id=t.company_id,Object(n["c"])(this.rejectMessage).then((function(e){a.loadBusinessListData()})).catch((function(e){console.log(e)})).then((function(){}))},handleCheckReject:function(e,t){this.dialogRejectVisible=!0,this.rejectMessage.check=2,this.rejectMessage.company_id=t.company_id},doRejectCheck:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;Object(n["c"])(t.rejectMessage).then((function(e){t.dialogRejectVisible=!1,t.loadBusinessListData()})).catch((function(e){console.log(e)})).then((function(){}))}))},lockCompany:function(e,t){var a=this;Object(n["f"])({status:e,company_id:t.company_id}).then((function(e){a.loadBusinessListData()})).catch((function(e){console.log(e)}))},handleDialogRejectClose:function(){console.log(11)}}},g=p,h=Object(u["a"])(g,i,l,!1,null,null,null);t["default"]=h.exports},fcac:function(e,t,a){"use strict";a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"f",(function(){return o})),a.d(t,"e",(function(){return r})),a.d(t,"b",(function(){return c}));var i=a("f46b");function l(e){return Object(i["a"])({url:"/company/index/companyList",method:"post",data:e})}function n(e){return Object(i["a"])({url:"/company/index/addCompany",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/company/index/checkCompany",method:"post",data:e})}function o(e){return Object(i["a"])({url:"/company/index/lockCompany",method:"post",data:e})}function r(){return Object(i["a"])({url:"/company/index/getState",method:"post"})}function c(e){return Object(i["a"])({url:"/company/index/areaList",method:"post",data:e})}}}]);
//# sourceMappingURL=chunk-6107bac0.89139d0c.js.map