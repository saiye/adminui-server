(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4fcb5ece"],{"3a92":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return o}));var l=a("f46b");function i(){return Object(l["a"])({url:"/room/billing/billingConfig",method:"post"})}function r(e){return Object(l["a"])({url:"/room/billing/addBilling",method:"post",data:e})}function o(e){return Object(l["a"])({url:"/room/billing/billingList",method:"post",data:e})}},"420d":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return n}));var l=a("f46b");function i(e){return Object(l["a"])({url:"/room/index/companyAndRoomList",method:"post",data:e})}function r(e){return Object(l["a"])({url:"/room/index/addRoom",method:"post",data:e})}function o(e){return Object(l["a"])({url:"/room/index/editRoom",method:"post",data:e})}function n(e){return Object(l["a"])({url:"/room/index/roomList",method:"post",data:e})}},8550:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"计费模式列表",name:"list"}},[a("el-form",{attrs:{model:e.form_list,inline:!0}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入店面，模式名进行搜索"},model:{value:e.form_list.search_name,callback:function(t){e.$set(e.form_list,"search_name",t)},expression:"form_list.search_name"}})],1),a("el-form-item",{attrs:{label:"请选择计费单位"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择计费单位"},model:{value:e.form_list.time_type,callback:function(t){e.$set(e.form_list,"time_type",t)},expression:"form_list.time_type"}},e._l(e.TimeTypeArr,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"货币类型"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择货币类型"},model:{value:e.form_list.price_type,callback:function(t){e.$set(e.form_list,"price_type",t)},expression:"form_list.price_type"}},e._l(e.PriceTypeArr,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",round:""},on:{click:e.onSearchList}},[e._v("查询")])],1)],1),a("cp_add_billing",{attrs:{TimeTypeArr:e.TimeTypeArr,PriceTypeArr:e.PriceTypeArr},on:{success:e.loadUserListData}}),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.ListLoading,expression:"ListLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableListData,border:"",stripe:"","highlight-current-row":"","header-cell-class-name":"table-header-class"}},[a("el-table-column",{attrs:{prop:"billing_id",label:"序号"}}),a("el-table-column",{attrs:{prop:"company_name",label:"商家名称"}}),a("el-table-column",{attrs:{prop:"store_name",label:"面店名称"}}),a("el-table-column",{attrs:{prop:"billing_name",label:"模式名称"}}),a("el-table-column",{attrs:{label:"计费单价"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.price)+"("+e._s(t.row.price_type)+")")])]}}])}),a("el-table-column",{attrs:{label:"计费单位"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.time_unit)+"/"+e._s(t.row.time_type))])]}}])}),a("el-table-column",{attrs:{prop:"created_at",label:"注册日期"}})],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"pagination"},[e.Paginate.total>0?a("el-pagination",{attrs:{background:"","page-sizes":e.Paginate.pageSizes,"page-size":e.Paginate.pageSize,layout:e.Paginate.layout,total:e.Paginate.total,"current-page":e.Paginate.pageIndex},on:{"current-change":e.handleUserChangePage,"size-change":e.handleUserChangeSize}}):e._e()],1)])],1)],1)],1)},i=[],r=(a("b0c0"),a("3a92")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button",{staticStyle:{float:"right","margin-right":"20px","margin-bottom":"10px"},attrs:{size:"mini",round:""},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新增计费模式 ")])],1)],1),a("el-dialog",{attrs:{title:"新增计费模式","close-on-click-modal":e.closeModal,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"add-dialog-box"},[a("el-form",{ref:"dialog_form",attrs:{model:e.dialog_form,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"所属门店",prop:"storeArr"}},[a("el-cascader",{attrs:{placeholder:"选择所在区域",props:e.storeListData,clearable:""},model:{value:e.dialog_form.storeArr,callback:function(t){e.$set(e.dialog_form,"storeArr",t)},expression:"dialog_form.storeArr"}})],1),a("el-form-item",{attrs:{label:"模式名称",prop:"billing_name"}},[a("el-input",{attrs:{placeholder:"请输入模式名字最长15位"},model:{value:e.dialog_form.billing_name,callback:function(t){e.$set(e.dialog_form,"billing_name",t)},expression:"dialog_form.billing_name"}})],1),a("el-form-item",{attrs:{label:"计费单价",prop:"price"}},[a("el-input",{attrs:{placeholder:"计费单价，仅为数字,最小0.1"},model:{value:e.dialog_form.price,callback:function(t){e.$set(e.dialog_form,"price",e._n(t))},expression:"dialog_form.price"}})],1),a("el-form-item",{attrs:{label:"计费单位",prop:"time_unit"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"计费单位，仅为数字,不能为0"},model:{value:e.dialog_form.time_unit,callback:function(t){e.$set(e.dialog_form,"time_unit",e._n(t))},expression:"dialog_form.time_unit"}})],1),a("el-col",{attrs:{span:6}},[a("el-select",{attrs:{placeholder:"时间类型"},model:{value:e.dialog_form.time_type,callback:function(t){e.$set(e.dialog_form,"time_type",e._n(t))},expression:"dialog_form.time_type"}},e._l(e.TimeTypeArr,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1),a("el-col",{attrs:{span:6}},[a("el-select",{attrs:{placeholder:"货币类型"},model:{value:e.dialog_form.price_type,callback:function(t){e.$set(e.dialog_form,"price_type",e._n(t))},expression:"dialog_form.price_type"}},e._l(e.PriceTypeArr,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.dialogCance}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dialogConfirm("dialog_form")}}},[e._v("确 定")])],1)])],1)},n=[],s=a("420d"),c={name:"cp_add_billing",props:["TimeTypeArr","PriceTypeArr"],data:function(){return{closeModal:!1,dialogVisible:!1,loading:!1,UserListData:[],billingData:[],storeArr:[],storeListData:{lazy:!0,lazyLoad:function(e,t){e.level;var a={parent_id:e.value||-1,level:e.level||0};Object(s["b"])(a).then((function(e){t(e.data.data)})).catch((function(e){console.log(e)})).then((function(){}))}},dialog_form:{billing_name:"",price:100,price_type:1,time_unit:2,time_type:2},rules:{billing_name:[{required:!0,message:"请输入模式名称最长15位",trigger:"blur"},{min:1,max:15,message:"长度在 1 到 15个字符",trigger:"blur"}],price:[{required:!0,message:"请输入计费单价"},{type:"number",message:"你输入的必须是数字"}],price_type:[{required:!0,message:"请选择货币类型",trigger:"change"},{type:"number",message:"必须数值类型"}],time_type:[{required:!0,message:"请选择货币类型",trigger:"change"},{type:"number",message:"必须数值类型"}],storeArr:[{required:!0,message:"请选择门店",trigger:"change"}],time_unit:[{required:!0,message:"请输入单位数值",trigger:"blur"},{type:"number",message:"你输入的必须是数字,不能为0"}]}}},methods:{dialogConfirm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;Object(r["a"])(t.dialog_form).then((function(e){t.dialogVisible=!1,t.$emit("success")})).catch((function(e){})).then((function(){}))}))},dialogCance:function(){this.dialogVisible=!1}}},u=c,m=a("2877"),d=Object(m["a"])(u,o,n,!1,null,null,null),p=d.exports,g={components:{cp_add_billing:p},data:function(){return{TimeTypeArr:[],PriceTypeArr:[],activeName:"list",tableListData:[],ListLoading:!1,Paginate:{total:0,pageIndex:1,pageSize:15,pageSizes:[5,10,15,20],layout:"total, sizes, prev, pager, next, jumper"},form_list:{search_name:"",page:1,limit:15,time_type:"",price_type:""}}},mounted:function(){this.loadUserListData(),this.loadBillingConfig()},methods:{handleClick:function(e,t){console.log(e.name)},loadUserListData:function(){var e=this;Object(r["c"])(this.form_list).then((function(t){e.tableListData=t.data.data.data,e.Paginate.total=t.data.data.total})).catch((function(e){})).then((function(){}))},loadBillingConfig:function(){var e=this;Object(r["b"])().then((function(t){e.TimeTypeArr=t.data.time_type,e.PriceTypeArr=t.data.price_type})).catch((function(e){})).then((function(){}))},handleUserChangePage:function(e){this.Paginate.pageIndex=e,this.form_list.page=e,this.loadUserListData()},handleUserChangeSize:function(e){this.Paginate.pageSize=e,this.form_list.limit=e,this.loadUserListData()},onSearchList:function(){this.loadUserListData()}}},f=g,_=Object(m["a"])(f,l,i,!1,null,null,null);t["default"]=_.exports}}]);
//# sourceMappingURL=chunk-4fcb5ece.1887fce0.js.map