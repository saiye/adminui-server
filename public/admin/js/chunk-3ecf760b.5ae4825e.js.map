{"version":3,"sources":["webpack:///./src/views/sys/edit_role.vue?8cfa","webpack:///src/views/sys/edit_role.vue","webpack:///./src/views/sys/edit_role.vue?689f","webpack:///./src/views/sys/edit_role.vue","webpack:///./node_modules/core-js/modules/es.object.keys.js","webpack:///./src/api/role.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","attrs","model","value","item","callback","$$v","$set","expression","staticClass","isIndeterminate","on","handleCheckAllChange","checkAll","_v","_l","sub","i","key","staticStyle","checkedRole","checked","handleCheckedRoleChange","_s","name","m","j","s","l","onSubmit","staticRenderFns","component","$","toObject","nativeKeys","fails","FAILS_ON_PRIMITIVES","target","stat","forced","keys","it","addRole","data","request","url","method","editRole","deleteRole","getRoleItem","params","roleList"],"mappings":"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","file":"js/chunk-3ecf760b.5ae4825e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-form',{ref:\"form\",attrs:{\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"角色名称\"}},[_c('el-input',{model:{value:(_vm.item.role_name),callback:function ($$v) {_vm.$set(_vm.item, \"role_name\", $$v)},expression:\"item.role_name\"}})],1),_c('el-row',[_c('el-col',{attrs:{\"span\":3}},[_c('div',{staticClass:\"grid-content bg-purple-dark\"},[_c('el-checkbox',{attrs:{\"indeterminate\":_vm.isIndeterminate},on:{\"change\":_vm.handleCheckAllChange},model:{value:(_vm.checkAll),callback:function ($$v) {_vm.checkAll=$$v},expression:\"checkAll\"}},[_vm._v(\"全选 \")])],1)]),_c('el-col',{attrs:{\"span\":21}},_vm._l((_vm.menu),function(sub,i){return _c('el-row',{key:i,staticStyle:{\"border-style\":\"dashed\",\"border-width\":\"1px 1px\",\"margin\":\"5px\"}},[_c('el-checkbox-group',{model:{value:(_vm.checkedRole),callback:function ($$v) {_vm.checkedRole=$$v},expression:\"checkedRole\"}},[_c('el-col',{attrs:{\"span\":3}},[_c('el-checkbox',{key:i,attrs:{\"label\":i,\"checked\":sub.checked},on:{\"change\":_vm.handleCheckedRoleChange}},[_vm._v(\" \"+_vm._s(sub.name)+\" \")])],1),_c('el-col',{attrs:{\"span\":21}},_vm._l((sub.child),function(m,j){return _c('el-row',{key:j,staticStyle:{\"border-style\":\"dashed\",\"border-width\":\"1px 1px\",\"margin\":\"5px\"}},[_c('el-col',{attrs:{\"span\":3}},[_c('el-checkbox',{key:i+'.'+j,attrs:{\"checked\":m.checked,\"label\":i+'.'+j},on:{\"change\":_vm.handleCheckedRoleChange}},[_vm._v(_vm._s(m.name)+\" \")])],1),_c('el-col',{attrs:{\"span\":21}},[_c('el-row',_vm._l((m.child),function(s,l){return _c('el-col',{key:l,staticStyle:{\"border-style\":\"dashed\",\"border-width\":\"1px 1px\",\"margin\":\"5px\"},attrs:{\"span\":3}},[_c('el-checkbox',{key:i+'.'+j+'.'+l,attrs:{\"checked\":s.checked,\"label\":i+'.'+j+'.'+l}},[_vm._v(_vm._s(s.name)+\" \")])],1)}),1)],1)],1)}),1)],1)],1)}),1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"round\":\"\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"立即保存\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <el-form ref=\"form\" label-width=\"80px\">\r\n        <el-form-item label=\"角色名称\">\r\n            <el-input v-model=\"item.role_name\"></el-input>\r\n        </el-form-item>\r\n        <el-row>\r\n            <el-col :span=\"3\">\r\n                <div class=\"grid-content bg-purple-dark\">\r\n                    <el-checkbox :indeterminate=\"isIndeterminate\" v-model=\"checkAll\" @change=\"handleCheckAllChange\">全选\r\n                    </el-checkbox>\r\n                </div>\r\n            </el-col>\r\n            <el-col :span=\"21\">\r\n                <el-row v-for=\"(sub,i) in menu\" :key=\"i\"\r\n                        style=\"border-style:dashed; border-width: 1px 1px; margin:5px;\">\r\n                    <el-checkbox-group v-model=\"checkedRole\">\r\n                        <el-col :span=\"3\">\r\n                            <el-checkbox :label=\"i\" :checked=\"sub.checked\" @change=\"handleCheckedRoleChange\" :key=\"i\">\r\n                                {{sub.name}}\r\n                            </el-checkbox>\r\n                        </el-col>\r\n                        <el-col :span=\"21\">\r\n                            <el-row v-for=\"(m,j) in sub.child\" :key=\"j\"\r\n                                    style=\"border-style:dashed; border-width: 1px 1px; margin:5px;\">\r\n                                <el-col :span=\"3\">\r\n                                    <el-checkbox :checked=\"m.checked\" :label=\"i+'.'+j\" :key=\"i+'.'+j\"\r\n                                                 @change=\"handleCheckedRoleChange\">{{m.name}}\r\n                                    </el-checkbox>\r\n                                </el-col>\r\n                                <el-col :span=\"21\">\r\n                                    <el-row>\r\n                                        <el-col :span=\"3\" v-for=\"(s,l) in m.child\" :key=\"l\"\r\n                                                style=\"border-style:dashed; border-width: 1px 1px; margin:5px;\">\r\n                                            <el-checkbox :checked=\"s.checked\" :label=\"i+'.'+j+'.'+l\"\r\n                                                         :key=\"i+'.'+j+'.'+l\">{{s.name}}\r\n                                            </el-checkbox>\r\n                                        </el-col>\r\n                                    </el-row>\r\n                                </el-col>\r\n                            </el-row>\r\n                        </el-col>\r\n                    </el-checkbox-group>\r\n                </el-row>\r\n            </el-col>\r\n        </el-row>\r\n\r\n        <el-form-item>\r\n            <el-button type=\"primary\" @click=\"onSubmit\" round>立即保存</el-button>\r\n        </el-form-item>\r\n    </el-form>\r\n</template>\r\n<script>\r\n    import {getRoleItem,editRole} from '@/api/role'\r\n\r\n\r\n    export default {\r\n        data() {\r\n            return {\r\n                role_id:this.$route.params.role_id||1,\r\n                item: {\r\n                    role_name: '',\r\n                    role_id: '',\r\n                },\r\n                checkAll: false,\r\n                checkedRole: [],\r\n                menu: [],\r\n                isIndeterminate: true\r\n            }\r\n        },\r\n        mounted() {\r\n            this.loadData();\r\n        },\r\n        methods: {\r\n            loadData() {\r\n                getRoleItem({\r\n                    'role_id':this.role_id,\r\n                }).then(response => {\r\n                    this.item = response.data.item;\r\n                    this.menu = response.data.menu;\r\n                }).catch(function (error) {\r\n                    console.log(error);\r\n                }).then(function () {\r\n                    console.log('do onSubmit');\r\n                });\r\n            },\r\n            handleCheckAllChange(val) {\r\n                if (val) {\r\n                    let tmp = [];\r\n                    for (let o of Object.keys(this.menu)) {\r\n                        tmp.push(o);\r\n                        for (let m of Object.keys(this.menu[o].child)) {\r\n                            tmp.push(o + '.' + m);\r\n                            for (let s of Object.keys(this.menu[o].child[m].child)) {\r\n                                tmp.push(o + '.' + m + '.' + s);\r\n                            }\r\n                        }\r\n                    }\r\n                    this.checkedRole = tmp;\r\n                    this.isIndeterminate = false;\r\n                } else {\r\n                    this.checkedRole = [];\r\n                }\r\n            },\r\n            handleCheckedRoleChange(val) {\r\n                console.log(val)\r\n            },\r\n            onSubmit(){\r\n                editRole({\r\n                    'role_id':this.role_id,\r\n                    'act':this.checkedRole,\r\n                }).then(response => {\r\n\r\n                }).catch(function (error) {\r\n\r\n                }).then(function () {\r\n                    console.log('do onSubmit');\r\n                })\r\n\r\n\r\n            }\r\n        }\r\n    }\r\n</script>\r\n<style>\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_role.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit_role.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./edit_role.vue?vue&type=template&id=767368b8&\"\nimport script from \"./edit_role.vue?vue&type=script&lang=js&\"\nexport * from \"./edit_role.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.github.io/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","import request from '@/tools/request'\r\n\r\nexport function addRole(data) {\r\n    return request({\r\n        url: '/main/sys/add-role',\r\n        method: 'post',\r\n        data\r\n    })\r\n}\r\n\r\nexport function editRole(data) {\r\n    return request({\r\n        url: '/main/sys/edit-role',\r\n        method: 'post',\r\n        data\r\n    })\r\n}\r\n\r\nexport function deleteRole(data) {\r\n    return request({\r\n        url: '/main/sys/del-role',\r\n        method: 'post',\r\n        data\r\n    })\r\n}\r\n\r\nexport function getRoleItem(data) {\r\n    return request({\r\n        url: '/main/sys/edit-role',\r\n        method: 'get',\r\n        params: data\r\n    })\r\n}\r\nexport function roleList(data) {\r\n    return request({\r\n        url: '/main/sys/role-list',\r\n        method: 'get',\r\n        params: data\r\n    })\r\n}\r\n"],"sourceRoot":""}